## Data and Experiment Outputs

This repository does not include large data files or generated experiment outputs due to size constraints. Two directories need to be set up to reproduce the experiments:

### `notebooks/data/`
This directory contains the **metadataset** required for LLM uncertainty experiments.  
The metadataset was introduced in [finetuning_text_classifiers](https://github.com/sebastianpinedaar/finetuning_text_classifiers/tree/main).

Download the required data:

```bash
mkdir -p notebooks/data
cd notebooks/data

# Download extended (FTC) version – required for main experiments
wget https://rewind.tf.uni-freiburg.de/index.php/s/QGjKFQf42FeZCag/download/ftc.zip
unzip ftc.zip

# Download mini version – for faster testing
wget https://rewind.tf.uni-freiburg.de/index.php/s/G2KTnSYcC42gzwK/download/mini.zip
unzip mini.zip
```

## Calibration results
### `notebooks/Ensembling_Finetuned_LLMs/llm_experiments_data/arrays/`

This directory stores intermediate results generated by the main experiment scripts:

- Calibrated ensemble probabilities (`.npz` files)
- The directory is created automatically when running `main_iclr.py`.

## Dependencies

Set up the environment:

```bash
conda create -n ftc python=3.10
conda activate ftc

# Install LLM-specific requirements
cd notebooks/Ensembling_Finetuned_LLMs
pip install -r requirements.txt

# Install additional dependencies for uncertainty quantification
pip install torch pandas matplotlib seaborn scikit-learn
```

---

## Running Experiments

Best to use `slurm.sbatch` for running the experiment.
The main experiment is based of `notebooks/Ensembling_Finetuned_LLMs/main_iclr.py` and can be used with different data versions:

```bash

python main_iclr.py --data_version extended

python main_iclr.py --data_version mini
```